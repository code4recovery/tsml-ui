<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script>
      function setColorMode(dark) {
        document.documentElement.setAttribute(
          'data-bs-theme',
          dark ? 'dark' : 'light'
        );
      }
      setColorMode(window.matchMedia('(prefers-color-scheme: dark)').matches);
      window
        .matchMedia('(prefers-color-scheme: dark)')
        .addEventListener('change', function (e) {
          setColorMode(e.matches);
        });
    </script>
    <title>TSML UI</title>
  </head>
  <body>
    <main class="container my-5">
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <h1>TSML UI</h1>
          <p class="lead">
            TSML UI (12 Step Meeting List User Interface) is an open source
            interactive recovery meeting finder that can be embedded on any
            website.
          </p>
          <p>
            Setup instructions follow. More information is available on the
            <a href="https://github.com/code4recovery/tsml-ui" target="_blank"
              >project page on GitHub</a
            >, including advanced configuration options. To get help, please
            <a
              href="https://github.com/code4recovery/tsml-ui/issues"
              target="_blank"
              >file an issue</a
            >.
          </p>
          <section class="my-5">
            <h2 class="h4">12 Step Meeting List</h2>
            <p>
              If you are using the
              <a
                href="https://wordpress.org/plugins/12-step-meeting-list/"
                target="_blank"
                >12 Step Meeting List plugin</a
              >
              for WordPress, setup is simple. Go to Dashboard > Meetings >
              Import & Settings > Settings and change
              <code>User Interface Display</code> &rarr; <code>TSML UI</code>
            </p>
          </section>

          <section class="my-5">
            <h2 class="h4">Custom JSON feed</h2>
            <p>
              If you can generate a
              <a href="https://github.com/code4recovery/spec" target="_blank"
                >Meeting Guide-spec JSON feed</a
              >, say, from a custom database, you can plug that info in to the
              format below. If your data has geographic coordinates, adding a
              <a href="https://www.mapbox.com/" target="_blank"
                >Mapbox API access token</a
              >
              will enable "near location" search. To specify a
              default timezone for your location, set a
              <a
                href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"
                target="_blank"
                >proper time zone</a
              >
              in the <code>data-timezone</code> parameter. If you remove it,
              meeting times will be translated into the user's timezone.
            </p>
            <pre class="rounded bg-black text-light p-3 overflow-hidden">
&lt;div
  id="tsml-ui"
  data-src="/path/to/your.json"
  data-mapbox="pk.your.mapbox.access.token.goes.here"
  data-timezone="America/Los_Angeles"
&gt;&lt;/div&gt;
&lt;script src="https://tsml-ui.code4recovery.org/app.js" async&gt;&lt;/script&gt;</pre
            >
            <a
              class="btn btn-outline-primary"
              href="https://aasfmarin.org/meetings"
              target="_blank"
              >Demo: San Francisco & Marin, CA</a
            >
          </section>

          <section class="my-5">
            <h2 class="h4">Google Sheet (direct)</h2>
            <p>
              You can connect TSML UI directly to a Google Sheet. To do this,
              just use your Google Sheet URL as the
              <code>data-src</code> attribute, get a Google Sheets API Key (<a
                href="https://developers.google.com/sheets/api/guides/authorizing#APIKey"
                target="_blank"
                >here are instructions</a
              >), and enter it as the <code>data-google</code> attribute.
            </p>
            <pre class="rounded bg-black text-light p-3 overflow-hidden">
&lt;div
  id="tsml-ui"
  data-src="https://docs.google.com/spreadsheets/d/your.google.sheet.id/edit#gid=more.stuff.here"
  data-google="your.google.api.key"
  data-mapbox="pk.your.mapbox.access.token.goes.here"
  data-timezone="America/Los_Angeles"
&gt;&lt;/div&gt;
&lt;script src="https://tsml-ui.code4recovery.org/app.js" async&gt;&lt;/script&gt;</pre
            >
            <p>Some caveats when connecting directly to Google Sheets:</p>
            <ol>
              <li>
                Although it is free, Google imposes
                <a
                  href="https://developers.google.com/sheets/api/limits"
                  target="_blank"
                  >rate limits on its Sheets API</a
                >, and if that limit is exceeded, your users may see a 429 (too
                many requests) error when accessing the meeting finder.
              </li>
              <li>
                Depending on how your sheet is set up, the request from Google
                can be pretty bulky, and page performance may vary.
              </li>
              <li>
                Users may see incomplete data if they request the page while
                data is being entered.
              </li>
              <li>
                Some users may have privacy-oriented content blockers that block
                their access to Google, which will cause an error.
              </li>
              <li>
                If you choose to enter personally identifiable information (such
                as meeting contact information) this will be exposed to users
                who know how to look for it.
              </li>
            </ol>
            <p>
              The Sheets Importer option below mitigates these issues and does
              not require you to have a Google API key.
            </p>
            <a
              class="btn btn-outline-primary"
              href="https://meetings.pugetsoundaa.org/"
              target="_blank"
              >Demo: Puget Sound, WA</a
            >
          </section>

          <section class="my-5">
            <h2 class="h4">Google Sheet (via Sheet Importer)</h2>
            <p>
              You can generate a JSON feed from a Google Sheet using the
              <a href="https://sheets.code4recovery.org/" target="_blank"
                >Google Sheet Importer</a
              >. Use the URL you generate in conjunction with the Custom JSON
              feed instructions above. Here is a
              <a
                href="https://docs.google.com/spreadsheets/d/12Ga8uwMG4WJ8pZ_SEU7vNETp_aQZ-2yNVsYDFqIwHyE/edit#gid=0"
                target="_blank"
                >sample Google Sheet</a
              >
              you can use to get started.
            </p>
            <a
              class="btn btn-outline-primary"
              href="https://aasanjose.org/meetings"
              target="_blank"
              >Demo: San Jose, CA</a
            >
          </section>

          <p class="text-center">
            <a href="https://code4recovery.org" target="_blank">
              <img
                src="/logo.svg"
                width="100"
                height="100"
                alt="Code for Recovery"
              />
            </a>
          </p>
        </div>
      </div>
    </main>
  </body>
</html>
